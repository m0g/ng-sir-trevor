!function(){"use strict";angular.module("SirTrevor",[]).provider("SirTrevor",function(){this.$get=function(){return window.SirTrevor},this.Blocks=window.SirTrevor.Blocks,this.Block=window.SirTrevor.Block,this.Formatters=window.SirTrevor.Formatters,this.Formatter=window.SirTrevor.Formatter,this.Locales=window.SirTrevor.Locales,this.FloatingBlockControls=window.SirTrevor.FloatingBlockControls,this.SimpleBlock=window.SirTrevor.SimpleBlock,this.DEFAULTS=window.SirTrevor.DEFAULTS}).provider("SirTrevorOptions",function(){var r={blockTypes:["Text"],transform:{get:function(r){return{type:r.blockStorage.type,data:r.blockStorage.data}},set:function(r){return{type:r.type,data:r.data}}}};this.$get=function(){return r},this.$extend=function(t){angular.extend(r,t)},this.$set=function(t){r=t}}).directive("ngSirTrevor",["SirTrevor","SirTrevorOptions",function(r,t){var o={template:function(r){var t='<textarea class="sir-trevor" name="content"></textarea>';return r.parent("form").length||(t="<form>"+t+"</form>"),t},scope:{editor:"=stModel",params:"=stParams"},link:function(o,e){var n=angular.copy(t);angular.extend(n,o.params),n.el=$(e.find("textarea")),o.editor=new r.Editor(n),o.editor.get=function(){var r=[];return o.editor.blocks.sort(function(r,t){return r.$el.index()-t.$el.index()}),angular.forEach(o.editor.blocks,function(t){o.editor.saveBlockStateToStore(t),r.push(n.transform.get(t))}),r},o.editor.set=function(r){var t;angular.forEach(r,function(r){t=n.transform.set(r),o.editor.createBlock(t.type,t.data)})},o.editor.clear=function(){angular.forEach(o.editor.blocks,function(r){r.remove()}),o.editor.dataStore.data=[]}}};return o}])}();